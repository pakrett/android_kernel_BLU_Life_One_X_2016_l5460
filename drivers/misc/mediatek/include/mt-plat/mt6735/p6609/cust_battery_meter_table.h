#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#endif

#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUCT {
	signed int percentage;
	signed int voltage;
} BATTERY_PROFILE_STRUCT, *BATTERY_PROFILE_STRUCT_P;

typedef struct _R_PROFILE_STRUCT {
	signed int resistance;
	signed int voltage;
} R_PROFILE_STRUCT, *R_PROFILE_STRUCT_P;

typedef enum {
	T1_0C,
	T2_25C,
	T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-30,127476},
    	{-25,96862},
        {-20,74354},
        {-15,57626},
        {-10,45068},
        { -5,35548},
        {  0,28267},
        {  5,22650},
        { 10,18280},
        { 15,14855},
        { 20,12151},
        { 25,10000},
        { 30,8279},
        { 35,6892},
        { 40,5768},
        { 45,4852},
        { 50,4101},
        { 55,3483},
        { 60,2970},
        { 65,2544},
        { 70,2188},
        { 75,1889},
        { 80,1637}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUCT battery_profile_t0[] =
{
    { 0 , 4317 },
    { 3 , 4293 },
    { 5 , 4272 },
    { 8 , 4251 },
    { 11 , 4230 },
    { 14 , 4206 },
    { 16 , 4179 },
    { 19 , 4138 },
    { 22 , 4097 },
    { 25 , 4075 },
    { 27 , 4047 },
    { 30 , 4006 },
    { 33 , 3970 },
    { 35 , 3946 },
    { 38 , 3928 },
    { 41 , 3916 },
    { 44 , 3908 },
    { 46 , 3899 },
    { 49 , 3889 },
    { 52 , 3879 },
    { 55 , 3869 },
    { 57 , 3859 },
    { 60 , 3850 },
    { 63 , 3841 },
    { 66 , 3831 },
    { 68 , 3822 },
    { 71 , 3813 },
    { 74 , 3803 },
    { 76 , 3792 },
    { 79 , 3782 },
    { 82 , 3770 },
    { 85 , 3757 },
    { 87 , 3744 },
    { 89 , 3737 },
    { 90 , 3732 },
    { 91 , 3728 },
    { 92 , 3724 },
    { 93 , 3721 },
    { 93 , 3719 },
    { 94 , 3717 },
    { 95 , 3716 },
    { 95 , 3714 },
    { 96 , 3714 },
    { 96 , 3713 },
    { 97 , 3712 },
    { 97 , 3711 },
    { 98 , 3710 },
    { 98 , 3710 },
    { 98 , 3709 },
    { 99 , 3708 },
    { 99 , 3708 },
    { 100 , 3707 },
    { 100 , 3706 }
};

// T1 0C
BATTERY_PROFILE_STRUCT battery_profile_t1[] =
{
    { 0 , 4327 },
    { 2 , 4305 },
    { 4 , 4272 },
    { 6 , 4244 },
    { 9 , 4218 },
    { 11 , 4193 },
    { 13 , 4170 },
    { 15 , 4148 },
    { 17 , 4126 },
    { 19 , 4104 },
    { 22 , 4087 },
    { 24 , 4067 },
    { 26 , 4043 },
    { 28 , 4018 },
    { 30 , 3993 },
    { 32 , 3972 },
    { 35 , 3953 },
    { 37 , 3935 },
    { 39 , 3917 },
    { 41 , 3900 },
    { 43 , 3885 },
    { 45 , 3871 },
    { 47 , 3858 },
    { 50 , 3846 },
    { 52 , 3835 },
    { 54 , 3825 },
    { 56 , 3816 },
    { 58 , 3807 },
    { 60 , 3800 },
    { 63 , 3793 },
    { 65 , 3789 },
    { 67 , 3786 },
    { 69 , 3783 },
    { 71 , 3781 },
    { 73 , 3777 },
    { 76 , 3772 },
    { 78 , 3767 },
    { 80 , 3761 },
    { 82 , 3755 },
    { 84 , 3747 },
    { 86 , 3738 },
    { 88 , 3727 },
    { 91 , 3715 },
    { 93 , 3704 },
    { 95 , 3692 },
    { 96 , 3689 },
    { 97 , 3686 },
    { 97 , 3684 },
    { 98 , 3682 },
    { 99 , 3681 },
    { 99 , 3679 },
    { 100 , 3677 },
    { 100 , 3675 }
};

// T2 25C
BATTERY_PROFILE_STRUCT battery_profile_t2[] =
{
    { 0 , 4313 },
    { 2 , 4282 },
    { 4 , 4253 },
    { 6 , 4223 },
    { 8 , 4193 },
    { 14 , 4162 },
    { 16 , 4131 },
    { 18 , 4101 },
    { 21 , 4078 },
    { 23 , 4054 },
    { 25 , 4030 },
    { 27 , 4010 },
    { 29 , 3991 },
    { 31 , 3977 },
    { 33 , 3964 },
    { 35 , 3949 },
    { 37 , 3932 },
    { 39 , 3912 },
    { 41 , 3891 },
    { 43 , 3874 },
    { 45 , 3860 },
    { 47 , 3848 },
    { 49 , 3838 },
    { 51 , 3829 },
    { 53 , 3821 },
    { 55 , 3816 },
    { 57 , 3811 },
    { 59 , 3806 },
    { 61 , 3801 },
    { 64 , 3794 },
    { 66 , 3788 },
    { 68 , 3783 },
    { 70 , 3778 },
    { 72 , 3774 },
    { 72 , 3770 },
    { 74 , 3765 },
    { 76 , 3761 },
    { 78 , 3755 },
    { 80 , 3746 },
    { 82 , 3738 },
    { 84 , 3729 },
    { 86 , 3720 },
    { 88 , 3711 },
    { 90 , 3701 },
    { 92 , 3692 },
    { 92 , 3683 },
    { 94 , 3674 },
    { 96 , 3630 },
    { 98 , 3520 },
    { 100 , 3366 },
    { 100 , 3325 },
    { 100 , 3305 },
    { 100 , 3294 }
};

// T3 50C
BATTERY_PROFILE_STRUCT battery_profile_t3[] =
{
    { 0 , 4308 },
    { 2 , 4280 },
    { 4 , 4252 },
    { 6 , 4223 },
    { 8 , 4200 },
    { 11 , 4174 },
    { 13 , 4146 },
    { 15 , 4119 },
    { 17 , 4095 },
    { 19 , 4070 },
    { 21 , 4052 },
    { 23 , 4037 },
    { 25 , 4020 },
    { 27 , 4005 },
    { 30 , 3988 },
    { 32 , 3971 },
    { 34 , 3954 },
    { 36 , 3937 },
    { 38 , 3919 },
    { 40 , 3900 },
    { 42 , 3881 },
    { 44 , 3865 },
    { 46 , 3852 },
    { 48 , 3841 },
    { 51 , 3831 },
    { 53 , 3822 },
    { 55 , 3814 },
    { 57 , 3807 },
    { 59 , 3800 },
    { 61 , 3793 },
    { 63 , 3788 },
    { 65 , 3782 },
    { 67 , 3776 },
    { 70 , 3770 },
    { 72 , 3762 },
    { 74 , 3755 },
    { 76 , 3746 },
    { 78 , 3739 },
    { 80 , 3731 },
    { 82 , 3724 },
    { 84 , 3716 },
    { 86 , 3704 },
    { 89 , 3692 },
    { 91 , 3677 },
    { 93 , 3674 },
    { 95 , 3661 },
    { 97 , 3602 },
    { 99 , 3479 },
    { 100 , 3290 },
    { 100 , 3270 },
    { 100 , 3264 },
    { 100 , 3259 },
    { 100 , 3255 }
};

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUCT battery_profile_temperature[] =
{
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0}
};

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUCT r_profile_t0[] =
{
    { 578 , 4317 },
    { 578 , 4293 },
    { 603 , 4272 },
    { 615 , 4251 },
    { 630 , 4230 },
    { 643 , 4206 },
    { 663 , 4179 },
    { 688 , 4138 },
    { 885 , 4097 },
    { 998 , 4075 },
    { 1018 , 4047 },
    { 1005 , 4006 },
    { 1003 , 3970 },
    { 1010 , 3946 },
    { 1015 , 3928 },
    { 1025 , 3916 },
    { 1043 , 3908 },
    { 1050 , 3899 },
    { 1058 , 3889 },
    { 1068 , 3879 },
    { 1083 , 3869 },
    { 1098 , 3859 },
    { 1118 , 3850 },
    { 1138 , 3841 },
    { 1155 , 3831 },
    { 1178 , 3822 },
    { 1205 , 3813 },
    { 1228 , 3803 },
    { 1248 , 3792 },
    { 1278 , 3782 },
    { 1305 , 3770 },
    { 1333 , 3757 },
    { 1360 , 3744 },
    { 1343 , 3737 },
    { 1330 , 3732 },
    { 1320 , 3728 },
    { 1310 , 3724 },
    { 1305 , 3721 },
    { 1300 , 3719 },
    { 1295 , 3717 },
    { 1290 , 3716 },
    { 1285 , 3714 },
    { 1285 , 3714 },
    { 1283 , 3713 },
    { 1283 , 3712 },
    { 1280 , 3711 },
    { 1278 , 3710 },
    { 1275 , 3710 },
    { 1275 , 3709 },
    { 1273 , 3708 },
    { 1273 , 3708 },
    { 1270 , 3707 },
    { 1268 , 3706 }
};

// T1 0C
R_PROFILE_STRUCT r_profile_t1[] =
{
    { 180 , 4327 },
    { 180 , 4305 },
    { 578 , 4272 },
    { 610 , 4244 },
    { 618 , 4218 },
    { 615 , 4193 },
    { 618 , 4170 },
    { 620 , 4148 },
    { 618 , 4126 },
    { 620 , 4104 },
    { 638 , 4087 },
    { 643 , 4067 },
    { 625 , 4043 },
    { 603 , 4018 },
    { 583 , 3993 },
    { 570 , 3972 },
    { 565 , 3953 },
    { 560 , 3935 },
    { 550 , 3917 },
    { 540 , 3900 },
    { 535 , 3885 },
    { 530 , 3871 },
    { 528 , 3858 },
    { 525 , 3846 },
    { 525 , 3835 },
    { 525 , 3825 },
    { 528 , 3816 },
    { 528 , 3807 },
    { 533 , 3800 },
    { 535 , 3793 },
    { 548 , 3789 },
    { 565 , 3786 },
    { 588 , 3783 },
    { 625 , 3781 },
    { 675 , 3777 },
    { 738 , 3772 },
    { 800 , 3767 },
    { 853 , 3761 },
    { 900 , 3755 },
    { 945 , 3747 },
    { 995 , 3738 },
    { 1050 , 3727 },
    { 1120 , 3715 },
    { 1210 , 3704 },
    { 1065 , 3692 },
    { 1225 , 3689 },
    { 1215 , 3686 },
    { 1213 , 3684 },
    { 1208 , 3682 },
    { 1205 , 3681 },
    { 1200 , 3679 },
    { 1195 , 3677 },
    { 1190 , 3675 }
};

// T2 25C
R_PROFILE_STRUCT r_profile_t2[] =
{
    { 153 , 4313 },
    { 153 , 4282 },
    { 153 , 4253 },
    { 153 , 4223 },
    { 153 , 4193 },
    { 153 , 4162 },
    { 153 , 4131 },
    { 153 , 4101 },
    { 153 , 4078 },
    { 153 , 4054 },
    { 170 , 4030 },
    { 180 , 4010 },
    { 193 , 3991 },
    { 203 , 3977 },
    { 213 , 3964 },
    { 208 , 3949 },
    { 203 , 3932 },
    { 193 , 3912 },
    { 175 , 3891 },
    { 165 , 3874 },
    { 160 , 3860 },
    { 158 , 3848 },
    { 158 , 3838 },
    { 158 , 3829 },
    { 158 , 3821 },
    { 158 , 3816 },
    { 158 , 3811 },
    { 160 , 3806 },
    { 160 , 3801 },
    { 163 , 3794 },
    { 163 , 3788 },
    { 163 , 3783 },
    { 158 , 3778 },
    { 160 , 3774 },
    { 160 , 3770 },
    { 158 , 3765 },
    { 158 , 3761 },
    { 158 , 3755 },
    { 158 , 3746 },
    { 165 , 3738 },
    { 173 , 3729 },
    { 185 , 3720 },
    { 198 , 3711 },
    { 210 , 3701 },
    { 228 , 3692 },
    { 240 , 3683 },
    { 253 , 3674 },
    { 263 , 3630 },
    { 308 , 3520 },
    { 398 , 3366 },
    { 293 , 3325 },
    { 245 , 3305 },
    { 218 , 3294 }
};

// T3 50C
R_PROFILE_STRUCT r_profile_t3[] =
{
    { 118 , 4308 },
    { 118 , 4280 },
    { 118 , 4252 },
    { 118 , 4223 },
    { 120 , 4200 },
    { 125 , 4174 },
    { 130 , 4146 },
    { 118 , 4119 },
    { 110 , 4095 },
    { 100 , 4070 },
    { 108 , 4052 },
    { 118 , 4037 },
    { 125 , 4020 },
    { 135 , 4005 },
    { 138 , 3988 },
    { 140 , 3971 },
    { 143 , 3954 },
    { 145 , 3937 },
    { 145 , 3919 },
    { 138 , 3900 },
    { 128 , 3881 },
    { 123 , 3865 },
    { 120 , 3852 },
    { 120 , 3841 },
    { 120 , 3831 },
    { 115 , 3822 },
    { 110 , 3814 },
    { 108 , 3807 },
    { 108 , 3800 },
    { 110 , 3793 },
    { 115 , 3788 },
    { 118 , 3782 },
    { 120 , 3776 },
    { 120 , 3770 },
    { 118 , 3762 },
    { 120 , 3755 },
    { 120 , 3746 },
    { 123 , 3739 },
    { 123 , 3731 },
    { 125 , 3724 },
    { 128 , 3716 },
    { 125 , 3704 },
    { 128 , 3692 },
    { 120 , 3677 },
    { 145 , 3674 },
    { 148 , 3661 },
    { 148 , 3602 },
    { 165 , 3479 },
    { 228 , 3290 },
    { 180 , 3270 },
    { 163 , 3264 },
    { 150 , 3259 },
    { 140 , 3255 }
};

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUCT r_profile_temperature[] =
{
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0}
};

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUCT_P fgauge_get_profile(unsigned int temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUCT_P fgauge_get_profile_r_table(unsigned int temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

