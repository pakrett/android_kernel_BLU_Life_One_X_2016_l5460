#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#endif

#define RBAT_PULL_UP_VOLT          1800


// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUCT {
	signed int percentage;
	signed int voltage;
} BATTERY_PROFILE_STRUCT, *BATTERY_PROFILE_STRUCT_P;

typedef struct _R_PROFILE_STRUCT {
	signed int resistance;
	signed int voltage;
} R_PROFILE_STRUCT, *R_PROFILE_STRUCT_P;

typedef enum {
	T1_0C,
	T2_25C,
	T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-30,127476},
    	{-25,96862},
        {-20,74354},
        {-15,57626},
        {-10,45068},
        { -5,35548},
        {  0,28267},
        {  5,22650},
        { 10,18280},
        { 15,14855},
        { 20,12151},
        { 25,10000},
        { 30,8279},
        { 35,6892},
        { 40,5768},
        { 45,4852},
        { 50,4101},
        { 55,3483},
        { 60,2970},
        { 65,2544},
        { 70,2188},
        { 75,1889},
        { 80,1637}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif


// T0 -10C
BATTERY_PROFILE_STRUCT battery_profile_t0[] = 
{
    { 0    , 4329 },
    { 2    , 4294 },
    { 3    , 4270 },
    { 5    , 4250 },
    { 7    , 4231 },
    { 8    , 4212 },
    { 10   , 4195 },
    { 12   , 4178 },
    { 13   , 4162 },
    { 15   , 4144 },
    { 17   , 4127 },
    { 19   , 4111 },
    { 20   , 4097 },
    { 22   , 4086 },
    { 24   , 4073 },
    { 25   , 4051 },
    { 27   , 4019 },
    { 29   , 3991 },
    { 30   , 3971 },
    { 32   , 3956 },
    { 34   , 3944 },
    { 35   , 3936 },
    { 37   , 3928 },
    { 39   , 3918 },
    { 40   , 3908 },
    { 42   , 3897 },
    { 44   , 3887 },
    { 46   , 3876 },
    { 47   , 3867 },
    { 49   , 3858 },
    { 51   , 3849 },
    { 52   , 3841 },
    { 54   , 3833 },
    { 56   , 3826 },
    { 57   , 3819 },
    { 59   , 3813 },
    { 61   , 3807 },
    { 62   , 3802 },
    { 64   , 3797 },
    { 66   , 3792 },
    { 67   , 3788 },
    { 69   , 3785 },
    { 71   , 3782 },
    { 73   , 3780 },
    { 74   , 3777 },
    { 76   , 3774 },
    { 78   , 3771 },
    { 79   , 3768 },
    { 81   , 3764 },
    { 83   , 3759 },
    { 84   , 3754 },
    { 86   , 3748 },
    { 88   , 3742 },
    { 89   , 3735 },
    { 91   , 3728 },
    { 92   , 3722 },
    { 94   , 3718 },
    { 95   , 3714 },
    { 95   , 3711 },
    { 96   , 3709 },
    { 97   , 3706 },
    { 97   , 3705 },
    { 98   , 3702 },
    { 98   , 3701 },
    { 99   , 3699 },
    { 99   , 3697 },
    { 100  , 3695 },
    { 100  , 3694 },
    { 100  , 3691 }
};      
        
// T1 0C 
BATTERY_PROFILE_STRUCT battery_profile_t1[] = 
{
    { 0    , 4340 },
    { 2    , 4313 },
    { 3    , 4291 },
    { 5    , 4272 },
    { 6    , 4254 },
    { 8    , 4236 },
    { 9    , 4219 },
    { 11   , 4202 },
    { 13   , 4186 },
    { 14   , 4170 },
    { 16   , 4154 },
    { 17   , 4137 },
    { 19   , 4121 },
    { 21   , 4105 },
    { 22   , 4092 },
    { 24   , 4083 },
    { 25   , 4070 },
    { 27   , 4044 },
    { 29   , 4013 },
    { 30   , 3989 },
    { 32   , 3972 },
    { 33   , 3959 },
    { 35   , 3949 },
    { 36   , 3940 },
    { 38   , 3929 },
    { 40   , 3917 },
    { 41   , 3905 },
    { 43   , 3893 },
    { 44   , 3882 },
    { 46   , 3871 },
    { 48   , 3861 },
    { 49   , 3852 },
    { 51   , 3844 },
    { 52   , 3836 },
    { 54   , 3829 },
    { 55   , 3822 },
    { 57   , 3816 },
    { 59   , 3811 },
    { 60   , 3805 },
    { 62   , 3800 },
    { 63   , 3795 },
    { 65   , 3791 },
    { 67   , 3787 },
    { 68   , 3783 },
    { 70   , 3781 },
    { 71   , 3778 },
    { 73   , 3776 },
    { 74   , 3772 },
    { 76   , 3769 },
    { 78   , 3765 },
    { 79   , 3760 },
    { 81   , 3755 },
    { 82   , 3748 },
    { 84   , 3741 },
    { 86   , 3732 },
    { 87   , 3722 },
    { 89   , 3712 },
    { 90   , 3705 },
    { 92   , 3701 },
    { 93   , 3696 },
    { 95   , 3688 },
    { 97   , 3660 },
    { 98   , 3601 },
    { 99   , 3561 },
    { 99   , 3528 },
    { 100  , 3502 },
    { 100  , 3481 },
    { 100  , 3465 },
    { 100  , 3465 }
};           

// T2 25C
BATTERY_PROFILE_STRUCT battery_profile_t2[] = 
{
    { 0    , 4337 },
    { 2    , 4307 },
    { 3    , 4284 },
    { 5    , 4264 },
    { 7    , 4245 },
    { 8    , 4227 },
    { 10   , 4209 },
    { 11   , 4192 },
    { 13   , 4175 },
    { 15   , 4159 },
    { 16   , 4142 },
    { 18   , 4126 },
    { 20   , 4110 },
    { 21   , 4094 },
    { 23   , 4079 },
    { 24   , 4064 },
    { 26   , 4050 },
    { 28   , 4036 },
    { 29   , 4021 },
    { 31   , 4005 },
    { 33   , 3991 },
    { 34   , 3978 },
    { 36   , 3964 },
    { 38   , 3950 },
    { 39   , 3938 },
    { 41   , 3925 },
    { 42   , 3911 },
    { 44   , 3898 },
    { 46   , 3882 },
    { 47   , 3869 },
    { 49   , 3857 },
    { 51   , 3846 },
    { 52   , 3835 },
    { 54   , 3827 },
    { 55   , 3821 },
    { 57   , 3815 },
    { 59   , 3810 },
    { 60   , 3805 },
    { 62   , 3800 },
    { 64   , 3792 },
    { 65   , 3788 },
    { 67   , 3784 },
    { 69   , 3780 },
    { 70   , 3776 },
    { 72   , 3771 },
    { 73   , 3766 },
    { 75   , 3761 },
    { 77   , 3755 },
    { 78   , 3748 },
    { 80   , 3743 },
    { 82   , 3737 },
    { 83   , 3729 },
    { 85   , 3720 },
    { 86   , 3711 },
    { 88   , 3702 },
    { 90   , 3691 },
    { 91   , 3678 },
    { 93   , 3665 },
    { 95   , 3650 },
    { 96   , 3635 },
    { 98   , 3578 },
    { 99   , 3445 },
    { 100  , 3309 },
    { 100  , 3292 },
    { 100  , 3286 },
    { 100  , 3282 },
    { 100  , 3282 },
    { 100  , 3282 },
    { 100  , 3282 }
};     

// T3 50C
BATTERY_PROFILE_STRUCT battery_profile_t3[] = 
{
    { 0    , 4338 },
    { 2    , 4313 },
    { 3    , 4291 },
    { 5    , 4271 },
    { 7    , 4253 },
    { 8    , 4235 },
    { 10   , 4217 },
    { 11   , 4200 },
    { 13   , 4183 },
    { 15   , 4166 },
    { 16   , 4149 },
    { 18   , 4133 },
    { 20   , 4116 },
    { 21   , 4100 },
    { 23   , 4085 },
    { 24   , 4069 },
    { 26   , 4054 },
    { 28   , 4039 },
    { 29   , 4024 },
    { 31   , 4010 },
    { 33   , 3996 },
    { 34   , 3982 },
    { 36   , 3968 },
    { 37   , 3954 },
    { 39   , 3940 },
    { 41   , 3928 },
    { 42   , 3915 },
    { 44   , 3900 },
    { 46   , 3886 },
    { 47   , 3873 },
    { 49   , 3861 },
    { 50   , 3848 },
    { 52   , 3836 },
    { 54   , 3829 },
    { 55   , 3822 },
    { 57   , 3816 },
    { 59   , 3810 },
    { 60   , 3805 },
    { 62   , 3800 },
    { 64   , 3795 },
    { 65   , 3790 },
    { 67   , 3786 },
    { 68   , 3778 },
    { 70   , 3771 },
    { 72   , 3764 },
    { 73   , 3755 },
    { 75   , 3747 },
    { 77   , 3741 },
    { 78   , 3734 },
    { 80   , 3729 },
    { 81   , 3723 },
    { 83   , 3716 },
    { 85   , 3707 },
    { 86   , 3698 },
    { 88   , 3692 },
    { 90   , 3684 },
    { 91   , 3679 },
    { 93   , 3675 },
    { 94   , 3671 },
    { 96   , 3647 },
    { 98   , 3578 },
    { 99   , 3472 },
    { 101  , 3298 },
    { 100  , 3284 },
    { 100  , 3278 },
    { 100  , 3274 },
    { 100  , 3274 },
    { 100  , 3274 },
    { 100  , 3274 }
};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUCT battery_profile_temperature[] = 
{
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  }
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUCT r_profile_t0[] = 
{ 
    { 193    , 4329 },
    { 1130   , 4294 },
    { 1140   , 4270 },
    { 1133   , 4250 },
    { 1120   , 4231 },
    { 1105   , 4212 },
    { 1095   , 4195 },
    { 1088   , 4178 },
    { 1078   , 4162 },
    { 1065   , 4144 },
    { 1055   , 4127 },
    { 1043   , 4111 },
    { 1033   , 4097 },
    { 1035   , 4086 },
    { 1038   , 4073 },
    { 1023   , 4051 },
    { 988    , 4019 },
    { 965    , 3991 },
    { 950    , 3971 },
    { 945    , 3956 },
    { 943    , 3944 },
    { 948    , 3936 },
    { 948    , 3928 },
    { 943    , 3918 },
    { 938    , 3908 },
    { 933    , 3897 },
    { 930    , 3887 },
    { 925    , 3876 },
    { 923    , 3867 },
    { 920    , 3858 },
    { 918    , 3849 },
    { 920    , 3841 },
    { 915    , 3833 },
    { 915    , 3826 },
    { 908    , 3819 },
    { 913    , 3813 },
    { 910    , 3807 },
    { 925    , 3802 },
    { 880    , 3797 },
    { 935    , 3792 },
    { 943    , 3788 },
    { 958    , 3785 },
    { 968    , 3782 },
    { 975    , 3780 },
    { 980    , 3777 },
    { 993    , 3774 },
    { 1005   , 3771 },
    { 1023   , 3768 },
    { 1043   , 3764 },
    { 1068   , 3759 },
    { 1093   , 3754 },
    { 1123   , 3748 },
    { 1168   , 3742 },
    { 1213   , 3735 },
    { 1273   , 3728 },
    { 1305   , 3722 },
    { 1298   , 3718 },
    { 1285   , 3714 },
    { 1280   , 3711 },
    { 1275   , 3709 },
    { 1265   , 3706 },
    { 1265   , 3705 },
    { 1258   , 3702 },
    { 1253   , 3701 },
    { 1250   , 3699 },
    { 1245   , 3697 },
    { 1240   , 3695 },
    { 1238   , 3694 },
    { 1230   , 3691 }
};      

// T1 0C
R_PROFILE_STRUCT r_profile_t1[] = 
{
    { 180    , 4340 },
    { 615    , 4313 },
    { 618    , 4291 },
    { 620    , 4272 },
    { 620    , 4254 },
    { 620    , 4236 },
    { 620    , 4219 },
    { 618    , 4202 },
    { 620    , 4186 },
    { 620    , 4170 },
    { 620    , 4154 },
    { 620    , 4137 },
    { 620    , 4121 },
    { 618    , 4105 },
    { 615    , 4092 },
    { 633    , 4083 },
    { 645    , 4070 },
    { 633    , 4044 },
    { 615    , 4013 },
    { 605    , 3989 },
    { 600    , 3972 },
    { 600    , 3959 },
    { 598    , 3949 },
    { 600    , 3940 },
    { 593    , 3929 },
    { 585    , 3917 },
    { 580    , 3905 },
    { 575    , 3893 },
    { 570    , 3882 },
    { 568    , 3871 },
    { 568    , 3861 },
    { 568    , 3852 },
    { 568    , 3844 },
    { 568    , 3836 },
    { 570    , 3829 },
    { 570    , 3822 },
    { 573    , 3816 },
    { 578    , 3811 },
    { 578    , 3805 },
    { 580    , 3800 },
    { 583    , 3795 },
    { 585    , 3791 },
    { 588    , 3787 },
    { 588    , 3783 },
    { 590    , 3781 },
    { 590    , 3778 },
    { 593    , 3776 },
    { 593    , 3772 },
    { 595    , 3769 },
    { 600    , 3765 },
    { 605    , 3760 },
    { 613    , 3755 },
    { 623    , 3748 },
    { 638    , 3741 },
    { 653    , 3732 },
    { 670    , 3722 },
    { 688    , 3712 },
    { 715    , 3705 },
    { 753    , 3701 },
    { 798    , 3696 },
    { 868    , 3688 },
    { 950    , 3660 },
    { 1005   , 3601 },
    { 905    , 3561 },
    { 823    , 3528 },
    { 758    , 3502 },
    { 705    , 3481 },
    { 665    , 3465 },
    { 665    , 3465 }
};     

// T2 25C
R_PROFILE_STRUCT r_profile_t2[] = 
{
    { 136   , 4337 },
    { 136   , 4307 },
    { 136   , 4284 },
    { 134   , 4264 },
    { 134   , 4245 },
    { 134   , 4227 },
    { 134   , 4209 },
    { 134   , 4192 },
    { 136   , 4175 },
    { 138   , 4159 },
    { 138   , 4142 },
    { 140   , 4126 },
    { 138   , 4110 },
    { 140   , 4094 },
    { 142   , 4079 },
    { 146   , 4064 },
    { 150   , 4050 },
    { 148   , 4036 },
    { 148   , 4021 },
    { 150   , 4005 },
    { 152   , 3991 },
    { 158   , 3978 },
    { 158   , 3964 },
    { 159   , 3950 },
    { 161   , 3938 },
    { 165   , 3925 },
    { 169   , 3911 },
    { 165   , 3898 },
    { 156   , 3882 },
    { 142   , 3869 },
    { 136   , 3857 },
    { 134   , 3846 },
    { 134   , 3835 },
    { 134   , 3827 },
    { 132   , 3821 },
    { 130   , 3815 },
    { 132   , 3810 },
    { 132   , 3805 },
    { 134   , 3800 },
    { 134   , 3792 },
    { 136   , 3788 },
    { 138   , 3784 },
    { 138   , 3780 },
    { 138   , 3776 },
    { 138   , 3771 },
    { 138   , 3766 },
    { 134   , 3761 },
    { 134   , 3755 },
    { 132   , 3748 },
    { 132   , 3743 },
    { 130   , 3737 },
    { 130   , 3729 },
    { 130   , 3720 },
    { 130   , 3711 },
    { 132   , 3702 },
    { 132   , 3691 },
    { 134   , 3678 },
    { 132   , 3665 },
    { 134   , 3650 },
    { 138   , 3635 },
    { 146   , 3578 },
    { 146   , 3445 },
    { 154   , 3309 },
    { 179   , 3292 },
    { 181   , 3286 },
    { 183   , 3282 },
    { 171   , 3282 },
    { 161   , 3282 },
    { 165   , 3282 }
};  

// T3 50C
R_PROFILE_STRUCT r_profile_t3[] = 
{
    { 131   , 4338 },
    { 131   , 4313 },
    { 129   , 4291 },
    { 129   , 4271 },
    { 131   , 4253 },
    { 129   , 4235 },
    { 129   , 4217 },
    { 131   , 4200 },
    { 133   , 4183 },
    { 131   , 4166 },
    { 131   , 4149 },
    { 133   , 4133 },
    { 133   , 4116 },
    { 133   , 4100 },
    { 135   , 4085 },
    { 135   , 4069 },
    { 135   , 4054 },
    { 138   , 4039 },
    { 140   , 4024 },
    { 138   , 4010 },
    { 140   , 3996 },
    { 142   , 3982 },
    { 145   , 3968 },
    { 147   , 3954 },
    { 151   , 3940 },
    { 154   , 3928 },
    { 156   , 3915 },
    { 158   , 3900 },
    { 154   , 3886 },
    { 138   , 3873 },
    { 133   , 3861 },
    { 133   , 3848 },
    { 131   , 3836 },
    { 131   , 3829 },
    { 131   , 3822 },
    { 131   , 3816 },
    { 133   , 3810 },
    { 133   , 3805 },
    { 133   , 3800 },
    { 135   , 3795 },
    { 135   , 3790 },
    { 135   , 3786 },
    { 138   , 3778 },
    { 140   , 3771 },
    { 142   , 3764 },
    { 145   , 3755 },
    { 135   , 3747 },
    { 131   , 3741 },
    { 131   , 3734 },
    { 131   , 3729 },
    { 129   , 3723 },
    { 131   , 3716 },
    { 131   , 3707 },
    { 131   , 3698 },
    { 131   , 3692 },
    { 131   , 3684 },
    { 133   , 3679 },
    { 129   , 3675 },
    { 133   , 3671 },
    { 135   , 3647 },
    { 142   , 3578 },
    { 140   , 3472 },
    { 147   , 3298 },
    { 165   , 3284 },
    { 225   , 3278 },
    { 193   , 3274 },
    { 181   , 3274 },
    { 172   , 3274 },
    { 172   , 3274 }
};    

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUCT r_profile_temperature[] = 
{
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  },
    { 0   , 0  }
};

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUCT_P fgauge_get_profile(unsigned int temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUCT_P fgauge_get_profile_r_table(unsigned int temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

